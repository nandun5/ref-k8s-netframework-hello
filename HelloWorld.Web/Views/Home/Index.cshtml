@{
    ViewBag.Title = "Home Page";

}

<main>
    <section class="row" aria-labelledby="aspnetTitle">
        <h1 id="title">ASP.NET</h1>
        <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
        <p><a href="https://asp.net" class="btn btn-primary btn-md">Learn more &raquo;</a></p>
    </section>

    <h2>File Path</h2>
    <pre id="filePath">Loading...</pre>

    <h2>File Content</h2>
    <pre id="fileContent">Loading...</pre>

    @section Scripts {
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
        function updateFileData() {
            $.ajax({
                url: '@Url.Action("GetFileData", "Home")',
                method: 'GET',
                success: function (data) {
                    $('#filePath').text(data.FilePath);
                    $('#fileContent').text(data.FileContent);
                },
                error: function () {
                    $('#filePath').text("Error loading file data.");
                    $('#fileContent').text("");
                }
            });
        }

        // Call immediately, then every 60 seconds
        updateFileData();
        setInterval(updateFileData, 5000); // 60000 ms = 1 min
        </script>
    }

</main>